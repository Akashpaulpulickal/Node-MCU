# Import necessary libraries
import RPi.GPIO as GPIO
import time

# Set up GPIO mode
GPIO.setmode(GPIO.BCM)

# Define GPIO pins for line tracking sensors
LEFT_SENSOR_PIN = 17
RIGHT_SENSOR_PIN = 27

# Define GPIO pins for motor driver
IN1 = 22
IN2 = 23
IN3 = 24
IN4 = 25

# Set up sensor pins as input
GPIO.setup(LEFT_SENSOR_PIN, GPIO.IN)
GPIO.setup(RIGHT_SENSOR_PIN, GPIO.IN)

# Set up motor driver pins as output
GPIO.setup(IN1, GPIO.OUT)
GPIO.setup(IN2, GPIO.OUT)
GPIO.setup(IN3, GPIO.OUT)
GPIO.setup(IN4, GPIO.OUT)

def move_forward():
    GPIO.output(IN1, GPIO.HIGH)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.HIGH)
    GPIO.output(IN4, GPIO.LOW)

def turn_left():
    GPIO.output(IN1, GPIO.LOW)
    GPIO.output(IN2, GPIO.HIGH)
    GPIO.output(IN3, GPIO.HIGH)
    GPIO.output(IN4, GPIO.LOW)

def turn_right():
    GPIO.output(IN1, GPIO.HIGH)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.LOW)
    GPIO.output(IN4, GPIO.HIGH)

def stop():
    GPIO.output(IN1, GPIO.LOW)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.LOW)
    GPIO.output(IN4, GPIO.LOW)

try:
    while True:
        left_sensor = GPIO.input(LEFT_SENSOR_PIN)
        right_sensor = GPIO.input(RIGHT_SENSOR_PIN)
        
        if left_sensor == 0 and right_sensor == 0:
            move_forward()
        elif left_sensor == 1 and right_sensor == 0:
            turn_left()
        elif left_sensor == 0 and right_sensor == 1:
            turn_right()
        else:
            stop()
        
        time.sleep(0.1)

except KeyboardInterrupt:
    print("Program terminated")

finally:
    GPIO.cleanup()

# Connections:
# - VCC pin of the sensors to the 3.3V pin of the Raspberry Pi.
# - GND pin of the sensors to the GND pin of the Raspberry Pi.
# - OUT pin of the left sensor to GPIO pin 17 (BCM numbering) of the Raspberry Pi.
# - OUT pin of the right sensor to GPIO pin 27 (BCM numbering) of the Raspberry Pi.
# - IN1 of the motor driver to GPIO pin 22 (BCM numbering) of the Raspberry Pi.
# - IN2 of the motor driver to GPIO pin 23 (BCM numbering) of the Raspberry Pi.
# - IN3 of the motor driver to GPIO pin 24 (BCM numbering) of the Raspberry Pi.
# - IN4 of the motor driver to GPIO pin 25 (BCM numbering) of the Raspberry Pi.
# - VCC of the motor driver to the 5V pin of the Raspberry Pi.
# - GND of the motor driver to the GND pin of the Raspberry Pi.
# - Motor A to the left motor.
# - Motor B to the right motor.
# Import necessary libraries
import RPi.GPIO as GPIO
import time

# Set up GPIO mode
GPIO.setmode(GPIO.BCM)

# Define GPIO pins for line tracking sensors
LEFT_SENSOR_PIN = 17
RIGHT_SENSOR_PIN = 27

# Define GPIO pins for motor driver
IN1 = 22
IN2 = 23
IN3 = 24
IN4 = 25

# Set up sensor pins as input
GPIO.setup(LEFT_SENSOR_PIN, GPIO.IN)
GPIO.setup(RIGHT_SENSOR_PIN, GPIO.IN)

# Set up motor driver pins as output
GPIO.setup(IN1, GPIO.OUT)
GPIO.setup(IN2, GPIO.OUT)
GPIO.setup(IN3, GPIO.OUT)
GPIO.setup(IN4, GPIO.OUT)

def move_forward():
    GPIO.output(IN1, GPIO.HIGH)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.HIGH)
    GPIO.output(IN4, GPIO.LOW)

def turn_left():
    GPIO.output(IN1, GPIO.LOW)
    GPIO.output(IN2, GPIO.HIGH)
    GPIO.output(IN3, GPIO.HIGH)
    GPIO.output(IN4, GPIO.LOW)

def turn_right():
    GPIO.output(IN1, GPIO.HIGH)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.LOW)
    GPIO.output(IN4, GPIO.HIGH)

def stop():
    GPIO.output(IN1, GPIO.LOW)
    GPIO.output(IN2, GPIO.LOW)
    GPIO.output(IN3, GPIO.LOW)
    GPIO.output(IN4, GPIO.LOW)

try:
    while True:
        left_sensor = GPIO.input(LEFT_SENSOR_PIN)
        right_sensor = GPIO.input(RIGHT_SENSOR_PIN)
        
        if left_sensor == 0 and right_sensor == 0:
            move_forward()
        elif left_sensor == 1 and right_sensor == 0:
            turn_left()
        elif left_sensor == 0 and right_sensor == 1:
            turn_right()
        else:
            stop()
        
        time.sleep(0.1)

except KeyboardInterrupt:
    print("Program terminated")

finally:
    GPIO.cleanup()

# Connections:
# - VCC pin of the sensors to the 3.3V pin of the Raspberry Pi.
# - GND pin of the sensors to the GND pin of the Raspberry Pi.
# - OUT pin of the left sensor to GPIO pin 17 (BCM numbering) of the Raspberry Pi.
# - OUT pin of the right sensor to GPIO pin 27 (BCM numbering) of the Raspberry Pi.
# - IN1 of the motor driver to GPIO pin 22 (BCM numbering) of the Raspberry Pi.
# - IN2 of the motor driver to GPIO pin 23 (BCM numbering) of the Raspberry Pi.
# - IN3 of the motor driver to GPIO pin 24 (BCM numbering) of the Raspberry Pi.
# - IN4 of the motor driver to GPIO pin 25 (BCM numbering) of the Raspberry Pi.
# - VCC of the motor driver to the 5V pin of the Raspberry Pi.
# - GND of the motor driver to the GND pin of the Raspberry Pi.
# - Motor A to the left motor.
# - Motor B to the right motor.
